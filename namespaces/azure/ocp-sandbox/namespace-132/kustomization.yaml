apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ../../base
nameSuffix: namespace-132
patches:
  - target:
      group: argoproj.io
      version: v1alpha1
      kind: Application
      name: base-application-namespace-132
    patch: |-
      - op: replace
        path: /spec/source/repoURL
        value: https://github.com/volvo-cars/openshift-charts
      - op: replace
        path: /spec/project
        value: base-application-project
      - op: replace
        path: /spec/source/chart
        value: onboard-team
      - op: replace
        path: /spec/source/targetRevision
        value: 1.0.2
      - op: replace
        path: /spec/source/helm/values
        value: |-
          namespace:
            name: namespace-132
          quota:
            enabled: true
            hard:
              requests.cpu: '20'
              requests.memory: 80Gi
              limits.cpu: '40'
              limits.memory: 160Gi
          psa:
            level: restricted
            mode: enforce
          rbac:
            OIDCGroupMapping:
              cld-openshift-prod-clusteradmin-sg: namespace-customadmin
          argocdproperties:
            projectconfig:
              enabled: true
              groups:
                42ad7f27-3c32-4276-b2ed-e525aa786fff: argoapp-admin
            allowedSourceRepos:
            - https://gitgub.com/volvo-cars/test-repo.git
          extraLabels:
            AppID: APP-1234
            istio.io/rev: default
            istio-injection: enabled
            component: application

